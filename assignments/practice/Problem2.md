# FlowChart to get the given data from the device and send it to AWS and InfulxDB
[![](https://mermaid.ink/img/eyJjb2RlIjoiZ3JhcGggVERcbkFbU21hcnQgU3JvYXQgMTAwMl1cbkE6OjpjbGFzczEgLS0-fENvbnRyb2wgQlVTfCBDKFtPUEMgU0VSVkVSXSlcbkM6OjpjbGFzczIgLS0-fE9QQyBVQSwgT1BDIERBfCBEKElPVCBnYXRld2F5KVxuRDo6OmNsYXNzMiAtLT58TVFRVCBDb0FQIFdFQlNPQ0tFVHwgQ2xvdWRbKEFXUyBJb1QgY29yZSldXG5hKChGbG93IHJhdGVzIG9mIGZsdWlkKSk6OjpjbGFzczMgLS0-IEFcbkNsb3VkLS4tPiBTdGVwW0FXUyBTdGVwIEZ1bmN0aW9uc106OjpjbGFzczItLi0-IGRie0FtYXpvbiBFQzIsIEluZmx1eERCfTo6OmNsYXNzMVxuQ2xvdWQgLS0-IExhbWJhW0FXUyBMYW1iZGFdOjo6Y2xhc3MyIC0tPmRiXG5kYiAtLT4gRygoR3JhZmFuYSkpOjo6Y2xhc3M1XG5kYiAtLT4gYWdbKEFtYXpvbiBTaW1wbGUgU3RvcmFnZSBTZXJ2aWNlICldLS0-ZFtBbWF6b24gU2FnZW1ha2VyXTo6OmNsYXNzNVxuICAgY2xhc3NEZWYgY2xhc3MxIGZpbGw6I0Y0QTQ2MCxzdHJva2U6IzMzMyxzdHJva2Utd2lkdGg6NHB4O1xuICAgICAgY2xhc3NEZWYgY2xhc3MyIGZpbGw6I0ZGREFCOSxzdHJva2U6IzMzMyxzdHJva2Utd2lkdGg6NHB4O1xuICAgICAgY2xhc3NEZWYgY2xhc3MzIGZpbGw6XHRcdCM2NDk1RUQsc3Ryb2tlOiMzMzMsc3Ryb2tlLXdpZHRoOjRweDtcbiAgICAgIGNsYXNzRGVmIGNsYXNzNCBmaWxsOiNmOWYsc3Ryb2tlOiMzMzMsc3Ryb2tlLXdpZHRoOjRweDtcbiAgICAgIGNsYXNzRGVmIGNsYXNzNSBmaWxsOlx0I0ZGQjZDMSxzdHJva2U6IzMzMyxzdHJva2Utd2lkdGg6NHB4O1xuICAgIiwibWVybWFpZCI6eyJ0aGVtZSI6ImZvcmVzdCJ9fQ)](https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiZ3JhcGggVERcbkFbU21hcnQgU3JvYXQgMTAwMl1cbkE6OjpjbGFzczEgLS0-fENvbnRyb2wgQlVTfCBDKFtPUEMgU0VSVkVSXSlcbkM6OjpjbGFzczIgLS0-fE9QQyBVQSwgT1BDIERBfCBEKElPVCBnYXRld2F5KVxuRDo6OmNsYXNzMiAtLT58TVFRVCBDb0FQIFdFQlNPQ0tFVHwgQ2xvdWRbKEFXUyBJb1QgY29yZSldXG5hKChGbG93IHJhdGVzIG9mIGZsdWlkKSk6OjpjbGFzczMgLS0-IEFcbkNsb3VkLS4tPiBTdGVwW0FXUyBTdGVwIEZ1bmN0aW9uc106OjpjbGFzczItLi0-IGRie0FtYXpvbiBFQzIsIEluZmx1eERCfTo6OmNsYXNzMVxuQ2xvdWQgLS0-IExhbWJhW0FXUyBMYW1iZGFdOjo6Y2xhc3MyIC0tPmRiXG5kYiAtLT4gRygoR3JhZmFuYSkpOjo6Y2xhc3M1XG5kYiAtLT4gYWdbKEFtYXpvbiBTaW1wbGUgU3RvcmFnZSBTZXJ2aWNlICldLS0-ZFtBbWF6b24gU2FnZW1ha2VyXTo6OmNsYXNzNVxuICAgY2xhc3NEZWYgY2xhc3MxIGZpbGw6I0Y0QTQ2MCxzdHJva2U6IzMzMyxzdHJva2Utd2lkdGg6NHB4O1xuICAgICAgY2xhc3NEZWYgY2xhc3MyIGZpbGw6I0ZGREFCOSxzdHJva2U6IzMzMyxzdHJva2Utd2lkdGg6NHB4O1xuICAgICAgY2xhc3NEZWYgY2xhc3MzIGZpbGw6XHRcdCM2NDk1RUQsc3Ryb2tlOiMzMzMsc3Ryb2tlLXdpZHRoOjRweDtcbiAgICAgIGNsYXNzRGVmIGNsYXNzNCBmaWxsOiNmOWYsc3Ryb2tlOiMzMzMsc3Ryb2tlLXdpZHRoOjRweDtcbiAgICAgIGNsYXNzRGVmIGNsYXNzNSBmaWxsOlx0I0ZGQjZDMSxzdHJva2U6IzMzMyxzdHJva2Utd2lkdGg6NHB4O1xuICAgIiwibWVybWFpZCI6eyJ0aGVtZSI6ImZvcmVzdCJ9fQ)
### After IOT Gateway
#### Next steps are elaborated in the next flowchart 
 An AWS Lambda function gets triggered and inserts IoT data into an InfluxDB database instance which is used to develop dashboards with Grafana. An additional option is represented to trigger Lambda Step Functions to aggregate the data at particular time intervals (such as average at 5 minute intervals) and to insert the aggregated data into InfluxDB. The InfluxDB data can also be exported as CSV files into Amazon S3 buckets and be the data source to perform anomaly detection or other ML modeling with Amazon SageMaker.

![i](https://d2908q01vomqb2.cloudfront.net/f6e1126cedebf23e1463aee73f9df08783640400/2020/01/24/GrafanaBlogArchitecture.png)

* Set up InfluxDB and Grafana on your own Amazon EC2 instances.
* Set up AWS IoT Core resources and AWS Lambda function needed to populate the time series database.
* Develop Grafana dashboard(s) with real-time visualizations to track IoT data.